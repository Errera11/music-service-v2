

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
    id String @id
    name String @unique
    email String @unique
    password String
    role String[]
    favorite Favorite[]
    playlist Playlist[]
    email_auth EmailAuth?
    avatar String?
    token TokenSession[]
}

model TokenSession {
    id Int @id @default(autoincrement())
    refreshToken String @unique
    user_id String
    user User @relation(fields: [user_id], references: [id])
}

model Song {
    id String @id
    name String @unique
    image String
    description String?
    artist String
    favorite Favorite[]
    playlist_songs PlaylistSongs[]
    album_songs AlbumSongs[]
}

model Album {
    id Int @id @default(autoincrement())
    title String
    description String
    author String
    album_songs AlbumSongs[]
}


model Favorite {
    id Int @id @default(autoincrement())
    user User @relation(fields: [user_id], references: [id])
    song Song @relation(fields: [song_id], references: [id])
    user_id String
    song_id String
}

model Playlist {
    id Int @id @default(autoincrement())
    title String
    description String
    user User @relation(fields: [user_id], references: [id])
    user_id String
    playlist_songs PlaylistSongs[]
}

model AlbumSongs {
    id Int @id @default(autoincrement())
    album Album @relation(fields: [album_id], references: [id])
    album_id Int
    song Song @relation(fields: [song_id], references: [id])
    song_id String
}

model PlaylistSongs {
    id Int @id @default(autoincrement())
    playlist Playlist @relation(fields: [playlist_id], references: [id])
    playlist_id Int
    song Song @relation(fields: [song_id], references: [id])
    song_id String
}

model EmailAuth {
    id Int @id @default(autoincrement())
    user User @relation(fields: [user_id], references: [id])
    user_id String @unique
    is_auth Boolean
}