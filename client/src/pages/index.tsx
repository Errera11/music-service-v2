import Head from 'next/head'
import {InferGetStaticPropsType} from "next";
import {albumApi} from "@/api/album";
import AlbumList from "@/components/albumList/AlbumList";
import styles from '../styles/index/index.module.scss';

// Listened/released/favTracks/playRandomSongMaybe

export default function Home({items}: InferGetStaticPropsType<typeof getStaticProps>) {

    return (
        <>
            <Head>
                <title>Music</title>
                <meta name="description" content="Generated by create next app"/>
                <meta name="viewport" content="width=device-width, initial-scale=1"/>
                <link rel="icon" href="../assets/favicon.ico"/>
            </Head>

            <>
                <div className={styles.container}>
                    <h1>Welcome back</h1>
                    <h2>Newest songs</h2>
                    <div className={styles.albumList}>
                        {items && <AlbumList albums={items}/>}
                    </div>
                </div>
            </>

        </>
    )
}

export const getStaticProps = async () => {
    try {
        const {items, totalCount} = (await albumApi.getAll({})).data;
        return {
            props: {
                items,
                totalCount
            }
        }
    } catch (e) {
        console.log(e);
        return {
            props: {
                songs: [],
                totalCount: 0
            },
            revalidate: 60 * 60 * 60
        }
    }
}
